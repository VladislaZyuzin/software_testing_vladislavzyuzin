# Лабораторная работа №1. Unit tests

## Описание проекта

**Название проекта**: Система заказа пиццы "Mishka Fredy!"

**Язык программирования**: Python

**Тип проекта**: Консольное приложение для управления заказами в пиццерии

Выбранный проект представляет собой систему управления заказами для пиццерии, которая включает в себя базовый класс `Pizza` для представления пицц с различными параметрами, специализированные классы пицц (`Pepperoni`, `Barbecue`, `Seafood`), класс `Order` для управления заказами и класс `Terminal` для взаимодействия с пользователем. Проект реализует полный цикл работы пиццерии - от выбора пиццы пользователем до формирования итогового заказа с расчетом общей стоимости.\

## Тестируемая функциональность и обоснование выбора

Были выбраны для тестирования критические компоненты системы, которые содержат основную бизнес-логику приложения. В первую очередь тестировался базовый класс Pizza, поскольку он является фундаментальным компонентом системы, от которого наследуются все конкретные виды пицц. В рамках этого класса проверялось создание пиццы с различными параметрами, расчет стоимости, операции над пиццами и строковое представление.

Также важное внимание было уделено тестированию конкретных видов пицц, так как они содержат бизнес-логику продукта - проверялась корректность инициализации параметров и правильность расчета цен для разных видов пицц. Класс Order тестировался как ключевой компонент управления заказами, включая добавление пицц в заказ, расчет общей стоимости и отображение информации о заказе. Наконец, класс Terminal был протестирован на базовое функционирование и обработку пользовательского ввода, поскольку он является точкой взаимодействия с пользователем.

Выбор именно этих компонентов обусловлен тем, что они содержат критически важные расчеты стоимости, обрабатывают пользовательский ввод и являются основой для дальнейшего расширения функциональности приложения. Отказ любой из этих компонент может привести к некорректной работе всей системы.

## Примеры написанных тестов

### Тест создания пиццы с параметрами по умолчанию

```py
def test_pizza_creation_default(self):
    # Arrange
    # Act
    pizza = Pizza()
    
    # Assert
    assert pizza.dough == "thin"
    assert pizza.sauce == "tomato"
    assert pizza.toppings == []
    assert pizza.price == 110
```

### Тест расчета стоимости заказа с несколькими пиццами

```py
def test_order_total_cost_multiple_pizzas(self):
    # Arrange
    order = Order()
    pepperoni = Pepperoni()
    barbecue = Barbecue()
    
    # Act
    order.add_pizza(pepperoni)
    order.add_pizza(barbecue)
    total = order.total_cost()
    
    # Assert
    assert total == 550  # 250 + 300
```

### Тест операции сложения пицц

```py
def test_pizza_add_operation(self):
    # Arrange
    pizza1 = Pizza(toppings=["cheese"])
    pizza2 = Pizza(toppings=["mushrooms"])
    
    # Act
    combined_pizza = pizza1 + pizza2
    
    # Assert
    assert combined_pizza.toppings == ["cheese", "mushrooms"]
```

### Тест граничного случая - пустой заказ

```py
def test_order_creation_empty(self):
    # Arrange & Act
    order = Order()
    
    # Assert
    assert order.pizzas == []
    assert order.total_cost() == 0
```
### Тест корректности цен разных видов пицц

```py
def test_different_pizza_prices(self):
    # Arrange
    pepperoni = Pepperoni()
    barbecue = Barbecue()
    seafood = Seafood()
    
    # Act & Assert
    assert pepperoni.price == 250
    assert barbecue.price == 300
    assert seafood.price == 400
    assert seafood.price > barbecue.price > pepperoni.price
```

## Принципы тестирования

Все тесты были написаны с применением подхода AAA (Arrange-Act-Assert), что обеспечивает четкую структуру и читаемость тестового кода. На этапе Arrange выполняется подготовка тестовых данных и создание необходимых объектов. На этапе Act производится выполнение тестируемого действия или вызов тестируемого метода. На этапе Assert выполняется проверка соответствия фактического результата ожидаемому.

Также тесты соответствуют принципам FIRST, что гарантирует их качество и эффективность. Принцип Fast соблюдается за счет того, что все тесты выполняются быстро - за 0.56 секунд. Принцип Isolated обеспечивается тем, что каждый тест создает собственные экземпляры объектов и не зависит от состояния других тестов. Принцип Repeatable выполняется, поскольку одинаковые входные данные всегда дают одинаковые результаты. Принцип Self-validating соблюдается через использование автоматических проверок с помощью assert. Принцип Timely выполнен, так как тесты были написаны одновременно с разработкой функциональности.

## Результаты запуска тестов
### Статистика выполнения тестов

<img width="977" height="333" alt="image" src="https://github.com/user-attachments/assets/d7f501b7-b011-4f57-b598-c0eb3e191c4b" />

### Покрытие кода (Code Coverage)

<img width="980" height="772" alt="image" src="https://github.com/user-attachments/assets/98690fea-c729-47bc-8b5f-553cc5cdd27c" />

## Выводы о качестве тестирования

Качество тестирования можно охарактеризовать как высокое, что подтверждается несколькими сильными сторонами реализации. Во-первых, достигнуто высокое покрытие кода - 95%, что является отличным показателем для проекта такого масштаба. Во-вторых, полностью покрыта тестами вся бизнес-логика, включая все критические расчеты стоимости, что обеспечивает надежность финансовых операций системы. В-третьих, тестовые сценарии отличаются разнообразием и включают как типичные случаи использования, так и граничные ситуации. Наконец, во всех тестах четко соблюдены принципы AAA и FIRST, что делает тестовый код поддерживаемым и понятным.

Однако в процессе тестирования были выявлены некоторые проблемы. Наиболее значительной является неполное покрытие класса Terminal, которое составляет 86%, что связано со сложностью тестирования пользовательского ввода в консольных приложениях. Также отсутствуют тесты на исключительные ситуации, такие как обработка некорректного пользовательского ввода или ошибочных состояний системы. Кроме того, методы вывода информации пользователю сложно тестировать автоматическими средствами.

Для дальнейшего улучшения качества тестирования рекомендуется реализовать дополнительные тесты для обработки некорректного пользовательского ввода, использовать mock-объекты для более полного тестирования класса Terminal, добавить интеграционные тесты для проверки полного цикла заказа и внедрить тесты производительности для работы с большими заказами. В целом, проект демонстрирует высокое качество тестирования с отличным покрытием критической бизнес-логики, что обеспечивает надежность ключевых операций системы заказа пицц.
